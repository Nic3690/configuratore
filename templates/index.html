<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuratore LED</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container-fluid">
    <header class="row bg-light py-3 mb-4">
      <div class="col text-center">
        <h1>Configuratore Profili e Strip LED</h1>
        <p class="lead">Configura il tuo sistema di illuminazione lineare</p>
      </div>
    </header>
    
    <!-- Progress bar -->
    <div class="step-progress mb-4">
      <div class="step-item active" id="progress-step1">
        <div class="step-number">1</div>
        <div class="step-title">Categoria</div>
      </div>
      <div class="step-item" id="progress-step2">
        <div class="step-number">2</div>
        <div class="step-title">Modello</div>
      </div>
      <div class="step-item" id="progress-step3">
        <div class="step-number">3</div>
        <div class="step-title">Tipologia</div>
      </div>
      <div class="step-item" id="progress-step4">
        <div class="step-number">4</div>
        <div class="step-title">Strip LED</div>
      </div>
      <div class="step-item" id="progress-step5">
        <div class="step-number">5</div>
        <div class="step-title">Alimentazione</div>
      </div>
      <div class="step-item" id="progress-step6">
        <div class="step-number">6</div>
        <div class="step-title">Controllo</div>
      </div>
      <div class="step-item" id="progress-step7">
        <div class="step-number">7</div>
        <div class="step-title">Personalizzazione</div>
      </div>
    </div>
    
    <!-- Step 1: Selezione Tipologia/Famiglia -->
    <div class="step-section" id="step1-tipologia">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-4">Seleziona la tipologia del profilo</h2>
        </div>
      </div>
      
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10">
          <div class="hotspot-container">
            <img src="{{ url_for('static', filename='img/mappa.jpg') }}" alt="Mappa dei LED" class="img-fluid">
            <div class="hotspots">
              <div class="hotspot" data-categoria="nanoprofili" style="top:70%; left:30%;">
                <span class="hotspot-dot"></span>
                <div class="hotspot-label">Nanoprofili</div>
              </div>
              <div class="hotspot" data-categoria="incasso" style="top:10%; left:70%;">
                <span class="hotspot-dot"></span>
                <div class="hotspot-label">Incasso</div>
              </div>
              <div class="hotspot" data-categoria="sospensione" style="top:40%; left:20%;">
                <span class="hotspot-dot"></span>
                <div class="hotspot-label">Sospensione</div>
              </div>
              <div class="hotspot" data-categoria="plafone" style="top:10%; left:36%;">
                <span class="hotspot-dot"></span>
                <div class="hotspot-label">Plafone</div>
              </div>
              <div class="hotspot" data-categoria="parete" style="top:76%; left:70%;">
                <span class="hotspot-dot"></span>
                <div class="hotspot-label">Parete</div>
              </div>
              <div class="hotspot" data-categoria="particolari" style="top:55%; left:50%;">
                <span class="hotspot-dot"></span>
                <div class="hotspot-label">Particolari</div>
              </div>
            </div>
          </div>
          
          <div class="text-center mt-5">
            <p class="small text-muted">Clicca su un punto della mappa per selezionare la tipologia</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Step 2: Selezione Modello -->
    <div class="step-section" id="step2-modello">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-4">Seleziona il modello del profilo</h2>
          <p class="text-center categoria-selezionata mb-4 fw-bold"></p>
        </div>
      </div>
      
      <!-- Container per i profili -->
      <div id="profili-container" class="container">
        <!-- I profili verranno caricati dinamicamente qui -->
      </div>
      
      <div class="row mt-4">
        <div class="col-12 text-center">
          <button class="btn btn-secondary btn-torna-indietro me-2">Torna alla selezione tipologia</button>
          <button class="btn btn-primary" id="btn-continua-step2" disabled>Continua</button>
        </div>
      </div>
    </div>
    
    <!-- Step 3: Selezione Tipologia Profilo -->
    <div class="step-section" id="step3-tipologia">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-2">Seleziona la tipologia del profilo</h2>
          <p class="text-center mb-4">
            <span class="badge selection-badge bg-primary p-2">Modello selezionato: <span id="profilo-nome-step3">Profilo</span></span>
          </p>
        </div>
      </div>
      
      <!-- Container per le tipologie -->
      <div class="container">
        <div class="row justify-content-center" id="tipologie-container">
          <!-- Le tipologie verranno caricate dinamicamente qui -->
        </div>
      </div>
      
      <div class="row mt-4">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step2">Indietro</button>
          <button class="btn btn-primary ms-2" id="btn-continua-step3" disabled>Continua</button>
        </div>
      </div>
    </div>
    
    <!-- Step 4: Selezione Strip LED -->
    <div class="step-section" id="step4-strip">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-3">Seleziona la Strip LED</h2>
          
          <div class="selection-badges">
            <span class="badge bg-primary selection-badge">Modello: <span id="profilo-nome-step4">Profilo</span></span>
            <span class="badge bg-success selection-badge">Tipologia: <span id="tipologia-nome-step4">Tipologia</span></span>
          </div>
          
          <p class="text-center mb-4 text-muted">
            <small>Seleziona la Strip LED da utilizzare con il profilo scelto, o scegli "Senza Strip LED" se preferisci</small>
          </p>
        </div>
      </div>
      
      <!-- Container per le strip LED -->
      <div class="container">
        <div class="row" id="strip-led-container">
          <!-- Le strip LED verranno caricate dinamicamente qui -->
        </div>
      </div>
      
      <div class="row mt-4">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step3">Indietro</button>
          <button class="btn btn-primary ms-2" id="btn-continua-step4" disabled>Continua</button>
        </div>
      </div>
    </div>
    <!-- Step 5: Temperatura e Potenza -->
    <div class="step-section" id="step5-temperatura-potenza">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-3">Configura l'illuminazione</h2>
          
          <div class="selection-badges">
            <span class="badge bg-primary selection-badge">Modello: <span id="profilo-nome-step5">Profilo</span></span>
            <span class="badge bg-success selection-badge">Tipologia: <span id="tipologia-nome-step5">Tipologia</span></span>
            <span class="badge bg-info selection-badge">Strip LED: <span id="strip-nome-step5">Strip LED</span></span>
          </div>
          
          <p class="text-center mb-4 text-muted">
            <small>Seleziona la temperatura colore e la potenza desiderata per la tua strip LED</small>
          </p>
        </div>
      </div>
      
      <!-- Container per temperatura colore -->
      <div class="container mb-5">
        <h3 class="mb-3">Temperatura colore</h3>
        <div class="row" id="temperatura-container">
          <!-- Le opzioni di temperatura verranno caricate dinamicamente qui -->
          <div class="col-12 text-center">
            <div class="spinner-border" role="status"></div>
            <p class="mt-3">Caricamento opzioni temperatura...</p>
          </div>
        </div>
      </div>
      
      <!-- Container per potenza -->
      <div class="container">
        <h3 class="mb-3">Potenza strip LED</h3>
        <div class="row" id="potenza-container">
          <!-- Le opzioni di potenza verranno caricate dinamicamente qui -->
        </div>
      </div>
      
      <div class="row mt-5">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step4">Indietro</button>
          <button class="btn btn-primary ms-2" id="btn-continua-step5" disabled>Continua</button>
        </div>
      </div>
    </div>

    <!-- Step 6: Alimentazione -->
    <div class="step-section" id="step6-alimentazione">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-3">Configura l'alimentazione</h2>
          
          <div class="selection-badges">
            <span class="badge bg-primary selection-badge">Modello: <span id="profilo-nome-step6">Profilo</span></span>
            <span class="badge bg-success selection-badge">Tipologia: <span id="tipologia-nome-step6">Tipologia</span></span>
            <span class="badge bg-info selection-badge">Strip LED: <span id="strip-nome-step6">Strip LED</span></span>
            <span class="badge bg-warning selection-badge" id="badge-temperatura-step6">Temperatura: <span id="temperatura-nome-step6">Temperatura</span></span>
            <span class="badge bg-secondary selection-badge" id="badge-potenza-step6">Potenza: <span id="potenza-nome-step6">Potenza</span></span>
          </div>
          
          <p class="text-center mb-4 text-muted">
            <small>Seleziona l'alimentazione per il tuo sistema</small>
          </p>
        </div>
      </div>
      
      <!-- Container per il tipo di alimentazione -->
      <div class="container mb-5">
        <h3 class="mb-3">Alimentazione</h3>
        <div class="row" id="alimentazione-container">
          <!-- Le opzioni di alimentazione verranno caricate dinamicamente qui -->
          <div class="col-md-6 mb-3">
            <div class="card option-card alimentazione-card" data-alimentazione="ON/OFF">
              <div class="card-body text-center">
                <h5 class="card-title">ON/OFF</h5>
                <p class="card-text small text-muted">Alimentazione standard ON/OFF</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-alimentazione">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-6 mb-3">
            <div class="card option-card alimentazione-card" data-alimentazione="DIMMERABILE_TRIAC">
              <div class="card-body text-center">
                <h5 class="card-title">Dimmerabile TRIAC</h5>
                <p class="card-text small text-muted">Alimentazione con controllo dell'intensità luminosa</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-alimentazione">Seleziona</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Container per il tipo di alimentatore -->
      <div class="container" id="alimentatore-section" style="display: none;">
        <h3 class="mb-3">Tipologia Alimentatore</h3>
        <div class="row" id="alimentatore-container">
          <!-- Le opzioni di alimentatore verranno caricate dinamicamente qui -->
        </div>
      </div>
      
      <div class="row mt-5">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step5">Indietro</button>
          <button class="btn btn-primary ms-2" id="btn-continua-step6" disabled>Continua</button>
        </div>
      </div>
    </div>

    <!-- Step 7: Controllo - Dimmer e Cavi -->
    <div class="step-section" id="step7-controllo">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-3">Configura controllo e cablaggio</h2>
          
          <div class="selection-badges">
            <span class="badge bg-primary selection-badge">Modello: <span id="profilo-nome-step7">Profilo</span></span>
            <span class="badge bg-success selection-badge">Tipologia: <span id="tipologia-nome-step7">Tipologia</span></span>
            <span class="badge bg-info selection-badge">Strip LED: <span id="strip-nome-step7">Strip LED</span></span>
            <span class="badge bg-dark selection-badge">Alimentazione: <span id="alimentazione-nome-step7">Alimentazione</span></span>
          </div>
          
          <p class="text-center mb-4 text-muted">
            <small>Configura le opzioni di controllo e cablaggio del tuo sistema</small>
          </p>
        </div>
      </div>
      
      <!-- Container per i dimmer -->
      <div class="container mb-5">
        <h3 class="mb-3">Dimmer</h3>
        <div class="row" id="dimmer-container">
          <!-- Le opzioni di dimmer verranno popolate qui -->
          <div class="col-md-4 mb-3">
            <div class="card option-card dimmer-card" data-dimmer="NESSUN_DIMMER">
              <div class="card-body text-center">
                <h5 class="card-title">Nessun dimmer</h5>
                <p class="card-text small text-muted">Installazione senza controllo di luminosità</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-dimmer">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card dimmer-card" data-dimmer="TOUCH_SU_PROFILO">
              <div class="card-body text-center">
                <h5 class="card-title">Touch su profilo</h5>
                <p class="card-text small text-muted">Controllo touch direttamente sul profilo</p>
                <p class="card-text small text-danger">Spazio non illuminato: 50mm</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-dimmer">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card dimmer-card" data-dimmer="CON_TELECOMANDO">
              <div class="card-body text-center">
                <h5 class="card-title">Con telecomando</h5>
                <p class="card-text small text-muted">Controllo a distanza con telecomando dedicato</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-dimmer">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card dimmer-card" data-dimmer="CENTRALINA_TUYA">
              <div class="card-body text-center">
                <h5 class="card-title">Centralina TUYA</h5>
                <p class="card-text small text-muted">Controllo smart tramite app mobile</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-dimmer">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card dimmer-card" data-dimmer="DIMMER_A_PULSANTE_SEMPLICE">
              <div class="card-body text-center">
                <h5 class="card-title">Dimmer a pulsante semplice</h5>
                <p class="card-text small text-muted">Controllo con pulsante standard</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-dimmer">Seleziona</button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Avviso per spazio non illuminato -->
        <div id="dimmer-warning" class="alert alert-warning" style="display: none;">
          <strong>Attenzione:</strong> Il dimmer touch comporta uno spazio non illuminato di <span id="dimmer-space">50</span>mm.
        </div>
      </div>
      
      <!-- Container per alimentazione cavo -->
      <div class="container mb-5">
        <h3 class="mb-3">Alimentazione Cavo</h3>
        <div class="row" id="alimentazione-cavo-container">
          <!-- Le opzioni di alimentazione cavo verranno popolate qui -->
          <div class="col-md-6 mb-3">
            <div class="card option-card alimentazione-cavo-card" data-alimentazione-cavo="ALIMENTAZIONE_UNICA">
              <div class="card-body text-center">
                <h5 class="card-title">Alimentazione unica</h5>
                <p class="card-text small text-muted">Singolo punto di alimentazione</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-alimentazione-cavo">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-6 mb-3">
            <div class="card option-card alimentazione-cavo-card" data-alimentazione-cavo="ALIMENTAZIONE_DOPPIA">
              <div class="card-body text-center">
                <h5 class="card-title">Alimentazione doppia</h5>
                <p class="card-text small text-muted">Due punti di alimentazione</p>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-alimentazione-cavo">Seleziona</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Container per lunghezza cavo -->
      <div class="container mb-5">
        <h3 class="mb-3">Lunghezza Cavo</h3>
        <div class="form-group mb-3">
          <label for="lunghezza-cavo-ingresso">Lunghezza cavo in ingresso (mm):</label>
          <input type="number" class="form-control" id="lunghezza-cavo-ingresso" value="1800" min="0">
        </div>
        
        <div id="lunghezza-cavo-uscita-container" class="form-group mb-3" style="display: none;">
          <label for="lunghezza-cavo-uscita">Lunghezza cavo in uscita (mm):</label>
          <input type="number" class="form-control" id="lunghezza-cavo-uscita" value="1800" min="0">
        </div>
      </div>
      
      <!-- Container per uscita cavo -->
      <div class="container mb-5">
        <h3 class="mb-3">Uscita Cavo</h3>
        <div class="row" id="uscita-cavo-container">
          <!-- Le opzioni di uscita cavo verranno popolate qui -->
          <div class="col-md-3 mb-3">
            <div class="card option-card uscita-cavo-card" data-uscita-cavo="DRITTA">
              <div class="card-body text-center">
                <h5 class="card-title">Dritta</h5>
                <img src="/static/img/uscita_dritta.png" alt="Uscita dritta" class="img-fluid mb-2" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-uscita-cavo">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-3 mb-3">
            <div class="card option-card uscita-cavo-card" data-uscita-cavo="LATERALE_DX">
              <div class="card-body text-center">
                <h5 class="card-title">Laterale DX</h5>
                <img src="/static/img/uscita_laterale_dx.png" alt="Uscita laterale destra" class="img-fluid mb-2" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-uscita-cavo">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-3 mb-3">
            <div class="card option-card uscita-cavo-card" data-uscita-cavo="RETRO">
              <div class="card-body text-center">
                <h5 class="card-title">Retro</h5>
                <img src="/static/img/uscita_retro.png" alt="Uscita retro" class="img-fluid mb-2" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-uscita-cavo">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-3 mb-3">
            <div class="card option-card uscita-cavo-card" data-uscita-cavo="LATERALE_SX">
              <div class="card-body text-center">
                <h5 class="card-title">Laterale SX</h5>
                <img src="/static/img/uscita_laterale_sx.png" alt="Uscita laterale sinistra" class="img-fluid mb-2" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-uscita-cavo">Seleziona</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row mt-4">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step6">Indietro</button>
          <button class="btn btn-primary ms-2" id="btn-continua-step7" disabled>Continua</button>
        </div>
      </div>
    </div>

    <!-- Step 8: Personalizzazione (Forma, Finitura, Lunghezza) -->
    <div class="step-section" id="step8-personalizzazione">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-3">Personalizzazione del profilo</h2>
          
          <div class="selection-badges">
            <span class="badge bg-primary selection-badge">Modello: <span id="profilo-nome-step8">Profilo</span></span>
            <span class="badge bg-success selection-badge">Tipologia: <span id="tipologia-nome-step8">Tipologia</span></span>
          </div>
          
          <p class="text-center mb-4 text-muted">
            <small>Personalizza la forma, la finitura e la lunghezza del tuo profilo</small>
          </p>
        </div>
      </div>
      
      <!-- Container per la forma di taglio -->
      <div class="container mb-5">
        <h3 class="mb-3">Forma di taglio</h3>
        <div class="row" id="forma-taglio-container">
          <!-- Le opzioni di forma di taglio -->
          <div class="col-md-4 mb-3">
            <div class="card option-card forma-taglio-card selected" data-forma="DRITTO_SEMPLICE">
              <div class="card-body text-center">
                <h5 class="card-title">Dritto semplice</h5>
                <img src="/static/img/forma_dritto.png" alt="Dritto semplice" class="img-fluid mb-2" style="height: 60px;" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-forma">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card forma-taglio-card" data-forma="FORMA_L_DX">
              <div class="card-body text-center">
                <h5 class="card-title">Forma a L DX</h5>
                <img src="/static/img/forma_l_dx.png" alt="Forma a L DX" class="img-fluid mb-2" style="height: 60px;" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-forma">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card forma-taglio-card" data-forma="FORMA_L_SX">
              <div class="card-body text-center">
                <h5 class="card-title">Forma a L SX</h5>
                <img src="/static/img/forma_l_sx.png" alt="Forma a L SX" class="img-fluid mb-2" style="height: 60px;" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-forma">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card forma-taglio-card" data-forma="FORMA_C">
              <div class="card-body text-center">
                <h5 class="card-title">Forma a C</h5>
                <img src="/static/img/forma_c.png" alt="Forma a C" class="img-fluid mb-2" style="height: 60px;" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-forma">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card forma-taglio-card" data-forma="FORMA_A">
              <div class="card-body text-center">
                <h5 class="card-title">Forma a A</h5>
                <img src="/static/img/forma_a.png" alt="Forma a A" class="img-fluid mb-2" style="height: 60px;" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-forma">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card option-card forma-taglio-card" data-forma="RETTANGOLO_QUADRATO">
              <div class="card-body text-center">
                <h5 class="card-title">Rettangolo/Quadrato</h5>
                <img src="/static/img/forma_rettangolo.png" alt="Rettangolo/Quadrato" class="img-fluid mb-2" style="height: 60px;" onerror="this.src='/static/img/placeholder.jpg'; this.style.height='60px'">
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-forma">Seleziona</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Container per la finitura -->
      <div class="container mb-5">
        <h3 class="mb-3">Finitura</h3>
        <div class="row" id="finitura-container">
          <!-- Le opzioni di finitura -->
          <div class="col-md-3 mb-3">
            <div class="card option-card finitura-card" data-finitura="ALLUMINIO_ANODIZZATO">
              <div class="card-body text-center">
                <h5 class="card-title">Alluminio anodizzato</h5>
                <div class="finitura-preview alluminio-anodizzato mb-2"></div>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-finitura">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-3 mb-3">
            <div class="card option-card finitura-card" data-finitura="BIANCO">
              <div class="card-body text-center">
                <h5 class="card-title">Bianco</h5>
                <div class="finitura-preview bianco mb-2"></div>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-finitura">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-3 mb-3">
            <div class="card option-card finitura-card" data-finitura="NERO">
              <div class="card-body text-center">
                <h5 class="card-title">Nero</h5>
                <div class="finitura-preview nero mb-2"></div>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-finitura">Seleziona</button>
              </div>
            </div>
          </div>
          
          <div class="col-md-3 mb-3">
            <div class="card option-card finitura-card" data-finitura="ALLUMINIO">
              <div class="card-body text-center">
                <h5 class="card-title">Alluminio</h5>
                <div class="finitura-preview alluminio mb-2"></div>
                <button class="btn btn-sm btn-primary mt-2 btn-seleziona-finitura">Seleziona</button>
              </div>
            </div>
          </div>
        </div>
        
        <style>
          .finitura-preview {
            width: 100%;
            height: 40px;
            border-radius: 5px;
            border: 1px solid #ddd;
          }
          .alluminio-anodizzato {
            background: linear-gradient(135deg, #e1e1e1 0%, #b3b3b3 50%, #e1e1e1 100%);
          }
          .bianco {
            background-color: #ffffff;
          }
          .nero {
            background-color: #000000;
          }
          .alluminio {
            background: linear-gradient(135deg, #f5f5f5 0%, #c4c4c4 50%, #f5f5f5 100%);
          }
        </style>
      </div>
      
      <!-- Container per la lunghezza -->
      <div class="container mb-5">
        <h3 class="mb-3">Personalizzazione lunghezza</h3>
        
        <div id="istruzioni-misurazione" class="mb-4">
          <!-- Le istruzioni verranno generate dinamicamente in base alla forma selezionata -->
        </div>
        
        <div class="form-group mb-4">
          <label for="lunghezza-personalizzata">Lunghezza richiesta (mm):</label>
          <input type="number" class="form-control" id="lunghezza-personalizzata" placeholder="Inserisci la lunghezza in millimetri" min="100">
          <div class="form-text text-muted">
            Nota: verrà aggiunto automaticamente uno spazio di 5mm per i tappi e la saldatura.
          </div>
        </div>
        
        <div id="proposte-container" class="alert alert-info" style="display: none;">
          <h5>Proposte di lunghezza standard</h5>
          <p>Il sistema ha calcolato delle proposte di lunghezza standard più adatte per la tua installazione.</p>
          <p><strong>ATTENZIONE:</strong> se viene utilizzata la lunghezza personalizzata si verificherà uno spazio buio di <span id="spazio-produzione">5</span>mm.</p>
          
          <div class="row mt-3">
            <div class="col-md-6 mb-2">
              <div class="card">
                <div class="card-body text-center">
                  <h5 class="card-title">Proposta 1</h5>
                  <p class="card-text"><span id="proposta1-valore">1771mm</span></p>
                  <button class="btn btn-sm btn-outline-primary btn-seleziona-proposta" data-proposta="1" data-valore="1771">Seleziona</button>
                </div>
              </div>
            </div>
            
            <div class="col-md-6 mb-2">
              <div class="card">
                <div class="card-body text-center">
                  <h5 class="card-title">Proposta 2</h5>
                  <p class="card-text"><span id="proposta2-valore">1804mm</span></p>
                  <button class="btn btn-sm btn-outline-primary btn-seleziona-proposta" data-proposta="2" data-valore="1804">Seleziona</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row mt-4">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step7">Indietro</button>
          <button class="btn btn-success ms-2" id="btn-finalizza" disabled>Finalizza configurazione</button>
        </div>
      </div>
    </div>

    <!-- Riepilogo -->
    <div class="step-section" id="step9-riepilogo">
      <div class="row">
        <div class="col-12">
          <h2 class="text-center mb-3">Riepilogo configurazione</h2>
          <p class="text-center mb-4 text-muted">
            <small>Di seguito il riepilogo delle opzioni selezionate per il tuo sistema di illuminazione</small>
          </p>
        </div>
      </div>
      
      <div id="riepilogo-container">
        <!-- Il riepilogo verrà generato dinamicamente -->
      </div>
      
      <div class="row mt-4">
        <div class="col-12 text-center">
          <button class="btn btn-secondary" id="btn-torna-step8">Modifica configurazione</button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>